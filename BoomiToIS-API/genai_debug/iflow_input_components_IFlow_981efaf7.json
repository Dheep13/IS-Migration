{
  "process_name": "SAP SuccessFactors to SFTP Integration with Error Handling",
  "description": "This integration facilitates the secure transfer of employee data from SAP SuccessFactors to an SFTP server with comprehensive error handling capabilities. The integration extracts data from SuccessFactors, transforms it into the required format, and delivers it to a designated SFTP location while providing robust error notification mechanisms.",
  "endpoints": [
    {
      "method": "GET",
      "path": "/EmployeeData",
      "purpose": "Extract employee data from SuccessFactors and transfer to SFTP",
      "components": [
        {
          "type": "request_reply",
          "name": "SuccessFactors_Request",
          "id": "sf_request_1",
          "config": {
            "adapter": "SuccessFactors",
            "authentication": "OAuth",
            "operation": "Query(GET)",
            "resourcePath": "EmployeeData"
          }
        },
        {
          "type": "enricher",
          "name": "Data_Validation",
          "id": "data_validation_1",
          "config": {
            "validationRules": "Structure and content validation of received data"
          }
        },
        {
          "type": "enricher",
          "name": "Error_Handler",
          "id": "error_handler_1",
          "config": {
            "errorType": "All",
            "logErrors": true
          }
        },
        {
          "type": "request_reply",
          "name": "SFTP_Upload",
          "id": "sftp_upload_1",
          "config": {
            "adapter": "SFTP",
            "authentication": "UsernamePassword",
            "operation": "Write",
            "remoteDirectory": "${SFTP_DIRECTORY}",
            "fileName": "EmployeeData_${date}.txt"
          }
        },
        {
          "type": "request_reply",
          "name": "Email_Notification",
          "id": "email_notification_1",
          "config": {
            "adapter": "Mail",
            "recipient": "${ADMIN_EMAIL}",
            "subject": "SuccessFactors to SFTP Integration Error",
            "body": "Error details: ${error.message}"
          }
        },
        {
          "type": "enricher",
          "name": "Data_Transformation",
          "id": "data_transform_1",
          "config": {
            "mappingName": "Canonical To Kafka Avro",
            "mappings": [
              {
                "source": "profile.9",
                "target": "Root/Object/batchProcessingDirectives/Object/accountID/Object/username"
              },
              {
                "source": "profile.91",
                "target": "Root/Object/batchContactList/Array/ArrayElement1/Object/contact/Array/ArrayElement1/Object/contactID"
              },
              {
                "source": "profile.111",
                "target": "Root/Object/batchContactList/Array/ArrayElement1/Object/contact/Array/ArrayElement1/Object/contactPointList/Array/ArrayElement1/Object/contactPoint/Array/ArrayElement1/Object/type"
              },
              {
                "source": "profile.118",
                "target": "Root/Object/batchProcessingDirectives/Object/batchProcessingOption/Array/ArrayElement1/Object/name"
              }
            ]
          }
        }
      ],
      "sequence": [
        "sf_request_1",
        "data_validation_1",
        "data_transform_1",
        "sftp_upload_1"
      ],
      "transformations": [
        {
          "condition": "error in any component",
          "sequence": [
            "error_handler_1",
            "email_notification_1"
          ]
        }
      ],
      "sequence_flows": [
        {
          "id": "SequenceFlow_Start",
          "source": "sf_request_1",
          "target": "data_validation_1",
          "is_immediate": true,
          "xml_content": "<bpmn2:sequenceFlow id=\"SequenceFlow_Start\" sourceRef=\"sf_request_1\" targetRef=\"data_validation_1\" isImmediate=\"true\"/>"
        },
        {
          "id": "SequenceFlow_1",
          "source": "data_validation_1",
          "target": "error_handler_1",
          "is_immediate": true,
          "xml_content": "<bpmn2:sequenceFlow id=\"SequenceFlow_1\" sourceRef=\"data_validation_1\" targetRef=\"error_handler_1\" isImmediate=\"true\"/>"
        },
        {
          "id": "SequenceFlow_2",
          "source": "error_handler_1",
          "target": "sftp_upload_1",
          "is_immediate": true,
          "xml_content": "<bpmn2:sequenceFlow id=\"SequenceFlow_2\" sourceRef=\"error_handler_1\" targetRef=\"sftp_upload_1\" isImmediate=\"true\"/>"
        },
        {
          "id": "SequenceFlow_3",
          "source": "sftp_upload_1",
          "target": "email_notification_1",
          "is_immediate": true,
          "xml_content": "<bpmn2:sequenceFlow id=\"SequenceFlow_3\" sourceRef=\"sftp_upload_1\" targetRef=\"email_notification_1\" isImmediate=\"true\"/>"
        },
        {
          "id": "SequenceFlow_End",
          "source": "email_notification_1",
          "target": "data_transform_1",
          "is_immediate": true,
          "xml_content": "<bpmn2:sequenceFlow id=\"SequenceFlow_End\" sourceRef=\"email_notification_1\" targetRef=\"data_transform_1\" isImmediate=\"true\"/>"
        }
      ]
    }
  ]
}