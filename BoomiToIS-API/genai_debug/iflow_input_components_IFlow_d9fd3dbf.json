{
  "process_name": "SuccessFactors to SFTP Integration",
  "description": "This integration extracts employee data from SAP SuccessFactors and transfers it to an SFTP server with comprehensive error handling.",
  "endpoints": [
    {
      "method": "GET",
      "path": "/SuccessFactors/Employee",
      "purpose": "Retrieves employee data from SuccessFactors",
      "components": [
        {
          "type": "request_reply",
          "name": "SuccessFactors_Request",
          "id": "sf_request_1",
          "config": {
            "connection": "SuccessFactors OData API",
            "authentication": "OAuth",
            "endpoint": "Employee data endpoint",
            "method": "GET",
            "headers": {
              "Authorization": "OAuth bearer token",
              "Content-Type": "application/json"
            }
          }
        },
        {
          "type": "enricher",
          "name": "Data_Validation",
          "id": "data_validation_1",
          "config": {
            "validation_type": "JSON Schema",
            "error_handling": "Route to error flow"
          }
        },
        {
          "type": "enricher",
          "name": "Log_Success",
          "id": "log_success_1",
          "config": {
            "log_level": "INFO",
            "message": "Successfully processed and uploaded employee data"
          }
        },
        {
          "type": "request_reply",
          "name": "SFTP_Upload",
          "id": "sftp_upload_1",
          "config": {
            "connection": "SFTP server",
            "authentication": "Username/Password or Key-based",
            "target_directory": "${SFTP_TARGET_DIR}",
            "file_naming": "EmployeeData_YYYYMMDD.json",
            "file_format": "JSON"
          }
        },
        {
          "type": "groovy_script",
          "name": "Transform_Data",
          "id": "transform_data_1",
          "config": {
            "mapping": "Canonical To Kafka Avro",
            "source_format": "SuccessFactors Employee data",
            "target_format": "Structured format for SFTP"
          }
        }
      ],
      "sequence": [
        "sf_request_1",
        "data_validation_1",
        "transform_data_1",
        "sftp_upload_1",
        "log_success_1"
      ],
      "transformations": [
        {
          "source_field": "field_9",
          "target_field": "Root/Object/batchProcessingDirectives/Object/accountID/Object/username",
          "transformation_type": "direct_mapping"
        },
        {
          "source_field": "field_91",
          "target_field": "Root/Object/batchContactList/Array/ArrayElement1/Object/contact/Array/ArrayElement1/Object/contactID",
          "transformation_type": "direct_mapping"
        },
        {
          "source_field": "field_111",
          "target_field": "Root/Object/batchContactList/Array/ArrayElement1/Object/contact/Array/ArrayElement1/Object/contactPointList/Array/ArrayElement1/Object/contactPoint/Array/ArrayElement1/Object/type",
          "transformation_type": "direct_mapping"
        },
        {
          "source_field": "field_118",
          "target_field": "Root/Object/batchProcessingDirectives/Object/batchProcessingOption/Array/ArrayElement1/Object/name",
          "transformation_type": "direct_mapping"
        }
      ],
      "sequence_flows": [
        {
          "id": "SequenceFlow_Start",
          "source": "sf_request_1",
          "target": "data_validation_1",
          "is_immediate": true,
          "xml_content": "<bpmn2:sequenceFlow id=\"SequenceFlow_Start\" sourceRef=\"sf_request_1\" targetRef=\"data_validation_1\" isImmediate=\"true\"/>"
        },
        {
          "id": "SequenceFlow_1",
          "source": "data_validation_1",
          "target": "log_success_1",
          "is_immediate": true,
          "xml_content": "<bpmn2:sequenceFlow id=\"SequenceFlow_1\" sourceRef=\"data_validation_1\" targetRef=\"log_success_1\" isImmediate=\"true\"/>"
        },
        {
          "id": "SequenceFlow_2",
          "source": "log_success_1",
          "target": "sftp_upload_1",
          "is_immediate": true,
          "xml_content": "<bpmn2:sequenceFlow id=\"SequenceFlow_2\" sourceRef=\"log_success_1\" targetRef=\"sftp_upload_1\" isImmediate=\"true\"/>"
        },
        {
          "id": "SequenceFlow_End",
          "source": "sftp_upload_1",
          "target": "transform_data_1",
          "is_immediate": true,
          "xml_content": "<bpmn2:sequenceFlow id=\"SequenceFlow_End\" sourceRef=\"sftp_upload_1\" targetRef=\"transform_data_1\" isImmediate=\"true\"/>"
        }
      ]
    },
    {
      "method": "PUT",
      "path": "/SFTP/EmployeeData",
      "purpose": "Writes processed employee data to SFTP server",
      "components": [
        {
          "type": "enricher",
          "name": "Log_Upload_Result",
          "id": "log_upload_result_1",
          "config": {
            "log_level": "INFO",
            "message": "SFTP upload completed"
          }
        },
        {
          "type": "request_reply",
          "name": "SFTP_Upload_Direct",
          "id": "sftp_direct_upload_1",
          "config": {
            "connection": "SFTP server",
            "authentication": "Username/Password or Key-based",
            "target_directory": "${SFTP_TARGET_DIR}",
            "file_naming": "EmployeeData_YYYYMMDD.json",
            "file_format": "JSON or CSV (configurable)"
          }
        }
      ],
      "sequence": [
        "sftp_direct_upload_1",
        "log_upload_result_1"
      ],
      "transformations": [],
      "sequence_flows": [
        {
          "id": "SequenceFlow_Start",
          "source": "log_upload_result_1",
          "target": "sftp_direct_upload_1",
          "is_immediate": true,
          "xml_content": "<bpmn2:sequenceFlow id=\"SequenceFlow_Start\" sourceRef=\"log_upload_result_1\" targetRef=\"sftp_direct_upload_1\" isImmediate=\"true\"/>"
        }
      ]
    }
  ]
}