{
  "process_name": "SAP SuccessFactors to SFTP Integration with Error Handling",
  "description": "This integration facilitates the transfer of employee data from SAP SuccessFactors to an SFTP server with comprehensive error handling. The integration extracts data from SuccessFactors, transforms it into the required format, and uploads it to a designated SFTP location.",
  "endpoints": [
    {
      "method": "GET",
      "path": "/SuccessFactors/Employee",
      "purpose": "Retrieves employee data from SuccessFactors",
      "components": [
        {
          "type": "request_reply",
          "name": "SAP SuccessFactors Request",
          "id": "successfactors_request_1",
          "config": {
            "method": "GET",
            "authentication": "OAuth",
            "timeout": "30 seconds"
          }
        },
        {
          "type": "enricher",
          "name": "Log Success",
          "id": "log_success_1",
          "config": {
            "log_level": "INFO",
            "message": "Successfully processed and uploaded employee data"
          }
        },
        {
          "type": "groovy_script",
          "name": "Error Handler",
          "id": "error_handler_1",
          "config": {
            "log_level": "ERROR",
            "notification_channel": "Email",
            "include_details": "Full error stack trace and message payload"
          }
        },
        {
          "type": "request_reply",
          "name": "SFTP Upload",
          "id": "sftp_upload_1",
          "config": {
            "connection_type": "SFTP",
            "authentication": "Username/Password or Key-based",
            "operation": "Write",
            "file_naming": "Dynamic based on date/time"
          }
        },
        {
          "type": "enricher",
          "name": "Validate Response",
          "id": "validate_response_1",
          "config": {
            "validation_type": "JSON structure validation"
          }
        },
        {
          "type": "groovy_script",
          "name": "Transform Data",
          "id": "transform_data_1",
          "config": {
            "mapping": "Canonical To Kafka Avro",
            "field_mappings": [
              "profile.9 \u2192 Root/Object/batchProcessingDirectives/Object/accountID/Object/username",
              "profile.91 \u2192 Root/Object/batchContactList/Array/ArrayElement1/Object/contact/Array/ArrayElement1/Object/contactID",
              "profile.111 \u2192 Root/Object/batchContactList/Array/ArrayElement1/Object/contact/Array/ArrayElement1/Object/contactPointList/Array/ArrayElement1/Object/contactPoint/Array/ArrayElement1/Object/type",
              "profile.118 \u2192 Root/Object/batchProcessingDirectives/Object/batchProcessingOption/Array/ArrayElement1/Object/name"
            ]
          }
        }
      ],
      "sequence": [
        "successfactors_request_1",
        "validate_response_1",
        "transform_data_1",
        "sftp_upload_1",
        "log_success_1"
      ],
      "transformations": [
        {
          "source": "SuccessFactors Employee Data",
          "target": "SFTP File Format",
          "mapping": "Canonical To Kafka Avro"
        }
      ],
      "sequence_flows": [
        {
          "id": "SequenceFlow_Start",
          "source": "successfactors_request_1",
          "target": "log_success_1",
          "is_immediate": true,
          "xml_content": "<bpmn2:sequenceFlow id=\"SequenceFlow_Start\" sourceRef=\"successfactors_request_1\" targetRef=\"log_success_1\" isImmediate=\"true\"/>"
        },
        {
          "id": "SequenceFlow_1",
          "source": "log_success_1",
          "target": "error_handler_1",
          "is_immediate": true,
          "xml_content": "<bpmn2:sequenceFlow id=\"SequenceFlow_1\" sourceRef=\"log_success_1\" targetRef=\"error_handler_1\" isImmediate=\"true\"/>"
        },
        {
          "id": "SequenceFlow_2",
          "source": "error_handler_1",
          "target": "sftp_upload_1",
          "is_immediate": true,
          "xml_content": "<bpmn2:sequenceFlow id=\"SequenceFlow_2\" sourceRef=\"error_handler_1\" targetRef=\"sftp_upload_1\" isImmediate=\"true\"/>"
        },
        {
          "id": "SequenceFlow_3",
          "source": "sftp_upload_1",
          "target": "validate_response_1",
          "is_immediate": true,
          "xml_content": "<bpmn2:sequenceFlow id=\"SequenceFlow_3\" sourceRef=\"sftp_upload_1\" targetRef=\"validate_response_1\" isImmediate=\"true\"/>"
        },
        {
          "id": "SequenceFlow_End",
          "source": "validate_response_1",
          "target": "transform_data_1",
          "is_immediate": true,
          "xml_content": "<bpmn2:sequenceFlow id=\"SequenceFlow_End\" sourceRef=\"validate_response_1\" targetRef=\"transform_data_1\" isImmediate=\"true\"/>"
        }
      ]
    }
  ]
}