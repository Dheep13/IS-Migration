<?xml version=\\\"1.0\\\" encoding=\\\"UTF-8\\\"?>\\n    <soapenv:Envelope xmlns:soapenv=\\\"http://schemas.xmlsoap.org/soap/envelope/\\\" xmlns:urn=\\\"urn:enterprise.soap.sforce.com\\\">\\n        <soapenv:Body>\\n            <urn:create>\\n                <urn:sObjects>\\n                    <urn:type>Opportunity</urn:type>\\n                    <urn:Name>Stripe Subscription - ''' + planName + '''</urn:Name>\\n                    <urn:Description>''' + billingInterval + ''' subscription for ''' + planName + '''</urn:Description>\\n                    <urn:Amount>''' + planAmount + '''</urn:Amount>\\n                    <urn:CloseDate>''' + closeDate.format('yyyy-MM-dd') + '''</urn:CloseDate>\\n                    <urn:StageName>Closed Won</urn:StageName>\\n                    <urn:Probability>100</urn:Probability>\\n                    <urn:LeadSource>Stripe Webhook</urn:LeadSource>\\n                </urn:sObjects>\\n            </urn:create>\\n        </soapenv:Body>\\n    </soapenv:Envelope>'''\\n    \\n    message.setBody(opportunityXml)\\n    message.setHeader('Content-Type', 'text/xml')\\n    message.setHeader('SOAPAction', 'create')\\n    \\n    return message\\n}"
                },
                {
                    "name": "FormatErrorResponse.groovy",
                    "type": "groovy",
                    "script": "import com.sap.gateway.ip.core.customdev.util.Message\\nimport groovy.json.JsonBuilder\\n\\ndef Message processData(Message message) {\\n    def errorCode = message.getProperty('CamelHttpResponseCode') ?: '500'\\n    def errorMessage = message.getProperty('CamelExceptionCaught')?.getMessage() ?: 'Internal processing error'\\n    \\n    def errorResponse = [\\n        status: 'error',\\n        code: errorCode,\\n        message: errorMessage,\\n        timestamp: new Date().format(\\\"yyyy-MM-dd'T'HH:mm:ss'Z'\\\")\\n    ]\\n    \\n    def jsonBuilder = new JsonBuilder(errorResponse)\\n    message.setBody(jsonBuilder.toString())\\n    message.setHeader('Content-Type', 'application/json')\\n    message.setProperty('CamelHttpResponseCode', errorCode)\\n    \\n    return message\\n}"
                }
            ]
        }
    ]
}